{"version":3,"sources":["../src/GooglePublisherTag.jsx"],"names":["React","PureComponent","Measure","debounce","Format","Dimensions","nextId","scriptInitiated","getNextId","prepareDimensions","dimensions","format","HORIZONTAL","canBeLower","length","dimension","key","loadScript","js","document","createElement","async","defer","src","addEventListener","initOnEvent","event","init","currentTarget","removeEventListener","type","body","appendChild","initGooglePublisherTag","options","onInit","path","onImpressionViewable","onSlotRenderEnded","onSlotVisibilityChanged","firstTime","window","googletag","cmd","push","enableSingleRequest","pubads","disableInitialLoad","enableServices","slot","getAdUnitPath","GooglePublisherTag","contentRect","setState","bounds","update","props","id","node","state","width","targeting","collapseEmpty","fluid","availableDimensions","filter","find","JSON","stringify","currentTargeting","currentDimensions","removeSlot","adId","innerHTML","defineSlot","Object","keys","forEach","setTargeting","args","Array","isArray","setCollapseEmptyDiv","addService","display","refresh","resizeDebounce","componentDidMount","componentWillReceiveProps","componentWillUnmount","destroySlots","refreshSlot","render","handleResize","measureRef","handleNode","defaultProps","undefined","MOBILE_HORIZONTAL"],"mappings":"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","sourcesContent":["/**\n * https://developers.google.com/doubleclick-gpt/reference\n*/\nimport React, { PureComponent, type Node } from 'react';\nimport Measure from 'react-measure';\nimport debounce from 'lodash/debounce';\nimport Format from './constants/Format';\nimport Dimensions from './constants/Dimensions';\n\nlet nextId: number = 1;\nlet scriptInitiated: bool = false;\n\nfunction getNextId(): string {\n  nextId += 1;\n\n  return `rgpt-${nextId}`;\n}\n\nfunction prepareDimensions(\n  dimensions,\n  format: string = Format.HORIZONTAL,\n  canBeLower: boolean = true,\n) {\n  if (!dimensions || !dimensions.length) {\n    return Dimensions[format] || [];\n  }\n\n  if (dimensions.length === 1 && canBeLower) {\n    const dimension = dimensions[0];\n    const key = `${dimension[0]}x${dimension[1]}`;\n\n    if (Dimensions[key]) {\n      return Dimensions[key] || [];\n    }\n  }\n\n  return dimensions;\n}\n\nfunction loadScript(): void {\n  const js = document.createElement('script');\n  js.async = true;\n  js.defer = true;\n  js.src = 'https://www.googletagservices.com/tag/js/gpt.js';\n\n  // Delay the script append after a user interaction\n\n  document.addEventListener('scroll', initOnEvent);\n  document.addEventListener('mousemove', initOnEvent);\n  document.addEventListener('touchstart', initOnEvent);\n\n  function initOnEvent (event): void {\n    init();\n    event.currentTarget.removeEventListener(event.type, initOnEvent);\n  }\n\n  function init (): void {\n    if (scriptInitiated) {\n      // Don't load again\n      return false;\n    }\n\n    scriptInitiated = true;\n\n    document.body.appendChild(js);\n  }\n}\n\nfunction initGooglePublisherTag(options?: Object = {}, onInit?: Function): void {\n  const {\n    path,\n    onImpressionViewable,\n    onSlotRenderEnded,\n    onSlotVisibilityChanged,\n  } = options;\n\n  const firstTime = !window.googletag;\n\n  const googletag = window.googletag = window.googletag || {};\n  googletag.cmd = googletag.cmd || [];\n\n  if (firstTime) {\n    googletag.cmd.push(() => {\n      if (options.enableSingleRequest) {\n        // Infinite scroll requires SRA\n        googletag.pubads().enableSingleRequest();\n      }\n\n      // collapse div without ad\n      // googletag.pubads().collapseEmptyDivs();\n\n      // load ad with slot refresh\n      googletag.pubads().disableInitialLoad();\n\n      // enable google publisher tag\n      googletag.enableServices();\n    });\n\n    loadScript();\n  }\n\n  // Execute callback when the slot is visible in DOM (thrown before 'impressionViewable' )\n  if (onSlotRenderEnded) {\n    googletag.cmd.push(() => {\n      googletag.pubads().addEventListener('slotRenderEnded', (event) => {\n        // check if the current slot is the one the callback was added to\n        // (as addEventListener is global)\n        if (event.slot.getAdUnitPath() === path) {\n          onSlotRenderEnded(event);\n        }\n      });\n    });\n  }\n\n  // Execute callback when ad is completely visible in DOM\n  if (onImpressionViewable) {\n    googletag.cmd.push(() => {\n      googletag.pubads().addEventListener('impressionViewable', (event) => {\n        if (event.slot.getAdUnitPath() === path) {\n          onImpressionViewable(event);\n        }\n      });\n    });\n  }\n\n  // Execute callback whenever the on-screen percentage of an ad slot's area changes\n  if (onSlotVisibilityChanged) {\n    googletag.cmd.push(() => {\n      googletag.pubads().addEventListener('slotVisibilityChanged', (event) => {\n        if (event.slot.getAdUnitPath() === path) {\n          onSlotVisibilityChanged(event);\n        }\n      });\n    });\n  }\n\n  if (onInit) {\n    googletag.cmd.push(() => {\n      onInit(googletag);\n    });\n  }\n}\n\ntype Props = {\n  id?: string,\n  path: string,\n  format?: string,\n  canBeLower?: boolean, // can be ad lower than original size,\n  enableSingleRequest?: boolean,\n  dimensions?: string[], // [[300, 600], [160, 600]]\n  targeting?: Object,\n  resizeDebounce?: number,\n  onSlotRenderEnded?: Function,\n  onSlotVisibilityChanged?: Function,\n  onImpressionViewable?: Function,\n  collapseEmpty?: boolean,\n  fluid?: boolean,\n};\n\ntype State = {\n  bounds?: {\n    width: number,\n    height: number,\n  }\n};\n\nexport default class GooglePublisherTag extends PureComponent<Props, State> {\n  googletag: Object;\n  node: Node;\n\n  state = {};\n\n  handleResize = (contentRect) => {\n    this.setState({\n      bounds: contentRect.bounds,\n    }, () => {\n      this.update(this.props);\n    });\n  }\n\n  update = debounce((props: Props) => {\n    const {\n      id,\n      node,\n      googletag,\n      state: {\n        bounds,\n      },\n    } = this;\n\n    if (!googletag || !node || !bounds) {\n      return;\n    }\n\n    const { width } = bounds;\n\n    const {\n      dimensions,\n      format,\n      canBeLower,\n      targeting,\n      collapseEmpty,\n      fluid,\n    } = props;\n\n    const availableDimensions = prepareDimensions(dimensions, format, canBeLower)\n      .filter(dimension => dimension === 'fluid' || dimension[0] <= width);\n\n    if (fluid && !availableDimensions.find(dimension => dimension === 'fluid')) {\n      availableDimensions.push('fluid');\n    }\n\n    // do nothink\n    if (JSON.stringify(targeting) === JSON.stringify(this.currentTargeting)\n      && JSON.stringify(availableDimensions) === JSON.stringify(this.currentDimensions)) {\n      return;\n    }\n\n    this.currentTargeting = targeting;\n    this.currentDimensions = availableDimensions;\n\n    // remove current slot because dimensions is changed and current slot is old\n    this.removeSlot();\n\n    // there is nothink to display\n    if (!availableDimensions || !availableDimensions.length) {\n      return;\n    }\n\n    // prepare new node content\n    const adId = id || getNextId();\n    node.innerHTML = `<div id=\"${adId}\"></div>`;\n\n    // prepare new slot\n    const slot = googletag.defineSlot(props.path, availableDimensions, adId);\n    this.slot = slot;\n\n    // set targeting\n    if (targeting) {\n      Object.keys(targeting).forEach((key) => {\n        slot.setTargeting(key, targeting[key]);\n      });\n    }\n\n    // set collapsing\n    if (typeof collapseEmpty !== 'undefined') {\n      const args = Array.isArray(collapseEmpty)\n        ? collapseEmpty\n        : [collapseEmpty];\n\n      slot.setCollapseEmptyDiv(...args);\n    }\n\n    slot.addService(googletag.pubads());\n\n    // display new slot\n    googletag.display(adId);\n    googletag.pubads().refresh([slot]);\n  }, this.props.resizeDebounce)\n\n  componentDidMount() {\n    const {\n      path,\n      onImpressionViewable,\n      onSlotRenderEnded,\n      onSlotVisibilityChanged,\n    } = this.props;\n\n    const options = {\n      path,\n      onImpressionViewable,\n      onSlotRenderEnded,\n      onSlotVisibilityChanged,\n    };\n\n    initGooglePublisherTag(options, (googletag: Object) => {\n      this.googletag = googletag;\n      this.update(this.props);\n    });\n  }\n\n  componentWillReceiveProps(props) {\n    this.update(props);\n  }\n\n  componentWillUnmount() {\n    this.removeSlot();\n  }\n\n  removeSlot() {\n    const { slot, googletag, node } = this;\n    if (slot && googletag) {\n      googletag.destroySlots([slot]);\n      this.slot = null;\n\n      if (node) {\n        node.innerHTML = null;\n      }\n    }\n  }\n\n  refreshSlot() {\n    const { slot, googletag } = this;\n    if (slot && googletag) {\n      googletag.pubads().refresh([slot]);\n    }\n  }\n\n  handleNode = (node: Node) => {\n    this.node = node;\n\n    this.update(this.props);\n  }\n\n  render() {\n    return (\n      <Measure onResize={this.handleResize} bounds>\n        {({ measureRef }) => (\n          <div ref={measureRef}>\n            <div ref={this.handleNode} />\n          </div>\n        )}\n      </Measure>\n    );\n  }\n}\n\nGooglePublisherTag.defaultProps = {\n  id: undefined,\n  format: Format.MOBILE_HORIZONTAL,\n  canBeLower: true,\n  enableSingleRequest: false,\n  dimensions: undefined,\n  targeting: undefined,\n  resizeDebounce: 100,\n  onSlotRenderEnded: undefined,\n  onSlotVisibilityChanged: undefined,\n  onImpressionViewable: undefined,\n  collapseEmpty: false,\n  fluid: false,\n};\n"],"file":"GooglePublisherTag.js"}